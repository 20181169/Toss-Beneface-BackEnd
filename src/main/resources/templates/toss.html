<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>결제 페이지</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
<h1>상품 결제</h1>
<button onclick="requestTossPayment()">결제하기</button>

<script>
    function requestTossPayment() {
        const token = 'eyJ0eXBlIjoiSldUIiwiYWxnIjoiSFM1MTIifQ.eyJzdWIiOiJBQ0NFU1MiLCJpYXQiOjE3MzgyNjI4MTcsImV4cCI6MTczODI2MzcxNywibWVtYmVySWQiOjEsInJvbGUiOiJVU0VSIn0.x_r9OQJi2E5r6h9JZpxbggx2j8gcintuGFFu7eL7B0BhAS9uAFMiuY6MFZxPLk3Hn6sAEp11GjbkvFhgKpOLlg'; // 로컬스토리지에서 JWT 토큰 가져오기

        if (!token) {
            alert("로그인이 필요합니다.");
            return;
        }

        axios.post("http://localhost:8080/api/v1/payments/toss", {
            orderId: "order-12345",
            amount: 5000,
            yourSuccessUrl: "http://localhost:5500/payment-success.html",
            yourFailUrl: "http://localhost:5500/payment-fail.html"
        }, {
            headers: {
                "Authorization": `Bearer ${token}` // JWT 토큰 추가
            }
        })
            .then(response => {
                window.location.href = response.data.successUrl;
            })
            .catch(error => {
                console.error("결제 요청 실패", error);
                alert("결제 요청에 실패했습니다.");
            });
    }
</script>
</body>
</html>
